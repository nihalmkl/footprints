<%= include('../partials/header.ejs') %>
<form method="GET" action="/products/search">
    <input type="text" name="searchQuery" placeholder="Search products" value="<%= searchQuery || '' %>">

    <select name="sortBy" onchange="this.form.submit()">
        <option value="" <%= sortBy === '' ? 'selected' : '' %>>Sort by</option>
        <option value="popularity" <%= sortBy === 'popularity' ? 'selected' : '' %>>Popularity</option>
        <option value="priceLowToHigh" <%= sortBy === 'priceLowToHigh' ? 'selected' : '' %>>Price: Low to High</option>
        <option value="priceHighToLow" <%= sortBy === 'priceHighToLow' ? 'selected' : '' %>>Price: High to Low</option>
        <option value="averageRating" <%= sortBy === 'averageRating' ? 'selected' : '' %>>Average Ratings</option>
        <option value="featured" <%= sortBy === 'featured' ? 'selected' : '' %>>Featured</option>
        <option value="newArrivals" <%= sortBy === 'newArrivals' ? 'selected' : '' %>>New Arrivals</option>
        <option value="aToZ" <%= sortBy === 'aToZ' ? 'selected' : '' %>>A - Z</option>
        <option value="zToA" <%= sortBy === 'zToA' ? 'selected' : '' %>>Z - A</option>
    </select>
</form>
<div class="product-list">
    <% if (products && products.length > 0) { %>
        <% products.forEach(product => { %>
            <div class="product-item">
                <h3><%= product.product_name %></h3>
                <p>Price: $<%= product.variants[0].price %></p>
            </div>
        <% }); %>
    <% } else { %>
        <p>No products found</p>
    <% } %>
</div>
<%= include('../partials/footer.ejs') %>
